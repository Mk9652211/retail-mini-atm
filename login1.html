<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Retail Mini-ATM</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --main-grad: linear-gradient(135deg,#4f46e5,#7c3aed);
  --soft-grad: linear-gradient(180deg,#f4f6ff,#ffffff);
  --card-grad: linear-gradient(135deg,#ffffff,#f1f3ff);
  --login-grad: linear-gradient(180deg,#ffffff,#f5f6ff);
  --text:#0f172a;
  --muted:#6b7280;
  font-family:Inter,system-ui,sans-serif;
}

body{
  margin:0; min-height:100vh;
  background:
    radial-gradient(circle at 15% 20%,rgba(124,58,237,.25),transparent 40%),
    radial-gradient(circle at 80% 70%,rgba(79,70,229,.22),transparent 45%),
    var(--soft-grad);
  display:flex; align-items:center; justify-content:center;
  padding:30px; color:var(--text);
}

.container{
  width:1150px; max-width:100%;
  display:grid; grid-template-columns:1.2fr .8fr; gap:40px;
}

.hero{ padding:40px; }

.badge{
  display:inline-block; padding:6px 16px; border-radius:999px;
  background:var(--main-grad); color:#fff; font-size:12px; font-weight:600;
}

.hero h1{ font-size:44px; margin:18px 0; font-weight:800; }

.hero h1 span{
  background:var(--main-grad);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.hero p{ font-size:16px; color:var(--muted); max-width:520px; }

.stats{
  margin-top:30px;
  display:grid; grid-template-columns:repeat(3,1fr); gap:20px;
}

.stat{
  padding:22px; border-radius:20px;
  background:var(--card-grad);
  box-shadow:0 12px 30px rgba(99,102,241,.18);
}

.stat h3{ margin:0; font-size:22px; }
.stat span{ font-size:13px; color:var(--muted); }

/* LOGIN CARD */
.login{
  background:var(--login-grad);
  border-radius:28px;
  padding:36px;
  box-shadow:0 30px 70px rgba(99,102,241,.25);
}

.login h3{ margin:0; font-size:26px; }
.login p{ margin:6px 0 18px; color:var(--muted); font-size:14px; }

label{
  display:block;
  margin-top:14px;
  font-size:13px;
  color:var(--muted);
}

/* ðŸ”¥ UNIFIED SIZE FOR INPUTS, SELECT & BUTTONS */
input, select, button{
  width:100%;
  height:52px;          /* SAME HEIGHT */
  padding:0 16px;
  font-size:15px;
  border-radius:14px;
  box-sizing:border-box;
}

/* INPUTS */
input, select{
  border:1px solid #e5e7eb;
  margin-top:6px;
}

/* BUTTONS */
button{
  margin-top:22px;
  border:none;
  background:var(--main-grad);
  color:white;
  font-weight:600;
  cursor:pointer;
}

/* OTP */
.otp{ margin-top:18px; display:none; }

.otp input{
  text-align:center;
  letter-spacing:4px;
  font-weight:700;
}

#msg{
  margin-top:10px;
  font-size:13px;
  color:#b91c1c;
}

/* TOAST */
#toast{
  position:fixed; top:22px; left:50%;
  transform:translateX(-50%);
  background:#fff; padding:14px 22px;
  border-radius:16px;
  box-shadow:0 18px 40px rgba(0,0,0,.25);
  font-weight:700; display:none; z-index:99999;
}
</style>
</head>

<body>

<div id="toast"></div>

<div class="container">

<!-- LEFT -->
<div class="hero">
  <div class="badge">INNOVATION â€¢ HACKATHON</div>
  <h1>Cash access.<br><span>Re-imagined.</span></h1>
  <p>
    Retail Mini-ATM converts nearby stores into secure cash withdrawal points using UPI â€”
    eliminating ATM infrastructure while keeping cash accessible everywhere.
  </p>
  <div class="stats">
    <div class="stat"><h3>â‚¹0</h3><span>ATM Maintenance Cost</span></div>
    <div class="stat"><h3>3-Layer</h3><span>Security Flow</span></div>
    <div class="stat"><h3>Retail-Powered</h3><span>Uses shop cash flow</span></div>
  </div>
</div>

<!-- RIGHT -->
<div class="login">
  <h3>Secure Login</h3>
  <p>Access Retail Mini-ATM system</p>

  <label>Role</label>
  <select id="role">
    <option value="customer">Customer</option>
    <option value="retailer">Retailer</option>
    <option value="admin">Admin</option>
  </select>

  <label>Username</label>
  <input id="username" placeholder="username">

  <label>Password</label>
  <input id="password" type="password" placeholder="password">

  <button id="btnNext">Generate OTP</button>

  <div class="otp" id="otpArea">
    <label>Enter OTP</label>
    <input id="otpInput" placeholder="123456">
    <button id="btnVerify">Verify & Login</button>
  </div>

  <div id="msg"></div>
</div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="shared.js"></script>

<script>
const btnNext = document.getElementById("btnNext");
const btnVerify = document.getElementById("btnVerify");
const username = document.getElementById("username");
const password = document.getElementById("password");
const role = document.getElementById("role");
const otpArea = document.getElementById("otpArea");
const otpInput = document.getElementById("otpInput");
const msg = document.getElementById("msg");
const toast = document.getElementById("toast");

let pendingUser=null, pendingRole=null;

function showToast(t){
  toast.innerText=t;
  toast.style.display="block";
  setTimeout(()=>toast.style.display="none",4000);
}

btnNext.onclick=()=>{
  msg.textContent="";
  localStorage.removeItem(RW.KEY.LOGIN_OTP);

  const u=username.value.trim();
  const p=password.value.trim();
  const r=role.value;

  if(!u||!p){ msg.textContent="Enter username & password"; return; }

  if(!RW.verifyCredentials(r,u,p)){
    msg.textContent="Invalid credentials"; return;
  }

  const otp=RW.sendLoginOTP(u);
  showToast("Your Login OTP is: "+otp);

  otpArea.style.display="block";
  otpInput.focus();
  pendingUser=u;
  pendingRole=r;
};

btnVerify.onclick=()=>{
  msg.textContent="";
  if(!RW.verifyLoginOTP(pendingUser, otpInput.value.trim())){
    msg.textContent="Invalid or expired OTP"; return;
  }

  RW.completeLogin(pendingRole,pendingUser);

  if(pendingRole==="customer") location.href="customer.html";
  else if(pendingRole==="retailer") location.href="retailer.html";
  else location.href="admin.html";
};
</script>

</body>
</html>
